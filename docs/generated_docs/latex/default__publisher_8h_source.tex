\hypertarget{default__publisher_8h_source}{}\doxysection{default\+\_\+publisher.\+h}
\label{default__publisher_8h_source}\index{/Users/sarathmenon/Desktop/eth\_soft/code/Communication/libraries/communication\_lib/fastdds\_lib/publishers/default\_publisher/default\_publisher.h@{/Users/sarathmenon/Desktop/eth\_soft/code/Communication/libraries/communication\_lib/fastdds\_lib/publishers/default\_publisher/default\_publisher.h}}

\begin{DoxyCode}{0}
\DoxyCodeLine{1 \textcolor{preprocessor}{\#pragma once}}
\DoxyCodeLine{2 }
\DoxyCodeLine{3 \textcolor{preprocessor}{\#include <fastdds/dds/domain/DomainParticipant.hpp>}}
\DoxyCodeLine{4 \textcolor{preprocessor}{\#include <fastdds/dds/publisher/DataWriter.hpp>}}
\DoxyCodeLine{5 \textcolor{preprocessor}{\#include <fastdds/dds/publisher/DataWriterListener.hpp>}}
\DoxyCodeLine{6 \textcolor{preprocessor}{\#include <fastdds/dds/publisher/Publisher.hpp>}}
\DoxyCodeLine{7 \textcolor{preprocessor}{\#include <fastdds/dds/topic/TypeSupport.hpp>}}
\DoxyCodeLine{8 }
\DoxyCodeLine{9 \textcolor{keyword}{class }\mbox{\hyperlink{class_d_d_s_publisher}{DDSPublisher}} \{}
\DoxyCodeLine{10 \textcolor{keyword}{public}:}
\DoxyCodeLine{11   \textcolor{comment}{// Constrcutor declared in header file since it is a temlate func}}
\DoxyCodeLine{12   \textcolor{keyword}{template} <\textcolor{keyword}{class} msg\_type>}
\DoxyCodeLine{13   \mbox{\hyperlink{class_d_d_s_publisher}{DDSPublisher}}(msg\_type, std::string topic\_name,}
\DoxyCodeLine{14                eprosima::fastdds::dds::DomainParticipant *participant)}
\DoxyCodeLine{15       : publisher\_(\textcolor{keyword}{nullptr}), topic\_(\textcolor{keyword}{nullptr}), writer\_(\textcolor{keyword}{nullptr}),}
\DoxyCodeLine{16         type\_(\textcolor{keyword}{new} msg\_type) \{}
\DoxyCodeLine{17 }
\DoxyCodeLine{18     \textcolor{comment}{// Set topic name}}
\DoxyCodeLine{19     topic\_name\_ = topic\_name;}
\DoxyCodeLine{20 }
\DoxyCodeLine{21     \textcolor{comment}{// Set pointer to domain participant}}
\DoxyCodeLine{22     participant\_ = participant;}
\DoxyCodeLine{23   \}}
\DoxyCodeLine{24 }
\DoxyCodeLine{25   \textcolor{keyword}{virtual} \mbox{\hyperlink{class_d_d_s_publisher}{\string~DDSPublisher}}();}
\DoxyCodeLine{26 }
\DoxyCodeLine{27   \textcolor{keywordtype}{bool} init();}
\DoxyCodeLine{28 }
\DoxyCodeLine{29   \textcolor{keyword}{template} <\textcolor{keyword}{typename} T> \textcolor{keywordtype}{void} publish(T msg) \{}
\DoxyCodeLine{30     \textcolor{keywordflow}{while} (listener.\mbox{\hyperlink{class_d_d_s_publisher_1_1_pub_listener_aad6c5bd8a013b374dea6f597252148b1}{matched}}() == 0) \{}
\DoxyCodeLine{31       std::this\_thread::sleep\_for(}
\DoxyCodeLine{32           std::chrono::milliseconds(250)); \textcolor{comment}{// Sleep 250 ms}}
\DoxyCodeLine{33     \}}
\DoxyCodeLine{34 }
\DoxyCodeLine{35     \textcolor{comment}{// Publish Message}}
\DoxyCodeLine{36     writer\_-\/>write(\&msg);}
\DoxyCodeLine{37   \}}
\DoxyCodeLine{38 }
\DoxyCodeLine{39 \textcolor{keyword}{private}:}
\DoxyCodeLine{40   \textcolor{comment}{// Topic Name}}
\DoxyCodeLine{41   std::string topic\_name\_\{\};}
\DoxyCodeLine{42 }
\DoxyCodeLine{43 \textcolor{keyword}{private}:}
\DoxyCodeLine{44   eprosima::fastdds::dds::DomainParticipant *participant\_;}
\DoxyCodeLine{45   eprosima::fastdds::dds::Publisher *publisher\_;}
\DoxyCodeLine{46   eprosima::fastdds::dds::Topic *topic\_;}
\DoxyCodeLine{47   eprosima::fastdds::dds::DataWriter *writer\_;}
\DoxyCodeLine{48   eprosima::fastdds::dds::TypeSupport type\_;}
\DoxyCodeLine{49 }
\DoxyCodeLine{50   eprosima::fastdds::dds::ReliabilityQosPolicy best\_effort\_;}
\DoxyCodeLine{51   eprosima::fastdds::dds::DataWriterQos writer\_qos\_;}
\DoxyCodeLine{52 }
\DoxyCodeLine{53 \textcolor{keyword}{public}:}
\DoxyCodeLine{54   \textcolor{keyword}{class }\mbox{\hyperlink{class_d_d_s_publisher_1_1_pub_listener}{PubListener}} : \textcolor{keyword}{public} eprosima::fastdds::dds::DataWriterListener \{}
\DoxyCodeLine{55 }
\DoxyCodeLine{56   \textcolor{keyword}{public}:}
\DoxyCodeLine{57     \mbox{\hyperlink{class_d_d_s_publisher_1_1_pub_listener}{PubListener}}() = \textcolor{keywordflow}{default};}
\DoxyCodeLine{58     \mbox{\hyperlink{class_d_d_s_publisher_1_1_pub_listener}{\string~PubListener}}() \textcolor{keyword}{override} = \textcolor{keywordflow}{default};}
\DoxyCodeLine{59 }
\DoxyCodeLine{60   \textcolor{keyword}{private}:}
\DoxyCodeLine{61     \textcolor{keywordtype}{void} on\_publication\_matched(}
\DoxyCodeLine{62         eprosima::fastdds::dds::DataWriter *writer,}
\DoxyCodeLine{63         \textcolor{keyword}{const} eprosima::fastdds::dds::PublicationMatchedStatus \&info) \textcolor{keyword}{override};}
\DoxyCodeLine{64 }
\DoxyCodeLine{65     \textcolor{keywordtype}{int} matched\_ = 0;}
\DoxyCodeLine{66 }
\DoxyCodeLine{67   \textcolor{keyword}{public}:}
\DoxyCodeLine{69     \textcolor{keyword}{const} \textcolor{keywordtype}{float} \mbox{\hyperlink{class_d_d_s_publisher_1_1_pub_listener_aad6c5bd8a013b374dea6f597252148b1}{matched}}()\textcolor{keyword}{ const }\{ \textcolor{keywordflow}{return} matched\_; \}}
\DoxyCodeLine{70 }
\DoxyCodeLine{71   \} listener;}
\DoxyCodeLine{72 \};}

\end{DoxyCode}
